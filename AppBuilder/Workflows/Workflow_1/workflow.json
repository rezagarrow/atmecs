{
  "Id": 1,
  "Name": "Parse Event Data",
  "Description": "[\"name\", \"description\", \"ticketUrl\", \"mainImage\", \"localDate\", \"localTime\", \"segment\", \"seatmap\", \"attractions\", \"promoter\", \"venues\", \"lat\", \"log\"]",
  "IsDebug": false,
  "ActionList": {
    "Id": 1,
    "EventName": "Event",
    "Actions": [
      {
        "Id": 1,
        "ActionType": "ExecuteApiMethod",
        "OrderIndex": 0,
        "ActionParameters": [
          {
            "Id": 1,
            "Name": "ApiModule",
            "Value": "387",
            "IsExpression": false,
            "ActionId": 1,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 2,
            "Name": "MethodName",
            "Value": "EventData#POST",
            "IsExpression": false,
            "ActionId": 1,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 3,
            "Name": "HttpMethod",
            "IsExpression": false,
            "ActionId": 1,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 4,
            "Name": "ProcessResponseType",
            "Value": "1",
            "IsExpression": false,
            "ActionId": 1,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 5,
            "Name": "MethodInputs",
            "IsExpression": false,
            "ActionId": 1,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 6,
            "Name": "MethodInputsList",
            "Value": [
              {
                "MethodInputName": {
                  "IsExpression": false,
                  "Expression": "",
                  "Value": "Id"
                },
                "MethodInputValue": {
                  "IsExpression": false,
                  "Expression": "",
                  "Value": "[Id]"
                }
              }
            ],
            "IsExpression": false,
            "ActionId": 1,
            "OrderIndex": 0,
            "SubParameters": [
              {
                "Id": 7,
                "Name": "MethodInputName",
                "Value": "Id",
                "ParentParameterId": 6,
                "IsExpression": false,
                "ActionId": 1,
                "OrderIndex": 0,
                "SubParameters": []
              },
              {
                "Id": 8,
                "Name": "MethodInputValue",
                "Value": "[Id]",
                "ParentParameterId": 6,
                "IsExpression": false,
                "ActionId": 1,
                "OrderIndex": 0,
                "SubParameters": []
              }
            ]
          },
          {
            "Id": 9,
            "Name": "OutputTokenName",
            "Value": "result",
            "IsExpression": false,
            "ActionId": 1,
            "OrderIndex": 0,
            "SubParameters": []
          }
        ],
        "DiagramUID": "Activity_1ng2h1r"
      },
      {
        "Id": 2,
        "ActionType": "ExecuteJavascript",
        "OrderIndex": 1,
        "ActionParameters": [
          {
            "Id": 10,
            "Name": "ScriptName",
            "Value": "parseEventData",
            "IsExpression": false,
            "ActionId": 2,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 11,
            "Name": "LocalVariables",
            "Value": [
              {
                "Type": {
                  "IsExpression": false,
                  "Expression": "",
                  "Value": "string"
                },
                "Name": {
                  "IsExpression": false,
                  "Expression": "",
                  "Value": "input"
                },
                "Value": {
                  "IsExpression": false,
                  "Expression": "",
                  "Value": "[result]"
                }
              }
            ],
            "IsExpression": false,
            "ActionId": 2,
            "OrderIndex": 0,
            "SubParameters": [
              {
                "Id": 12,
                "Name": "Type",
                "Value": "string",
                "ParentParameterId": 11,
                "IsExpression": false,
                "ActionId": 2,
                "OrderIndex": 0,
                "SubParameters": []
              },
              {
                "Id": 13,
                "Name": "Name",
                "Value": "input",
                "ParentParameterId": 11,
                "IsExpression": false,
                "ActionId": 2,
                "OrderIndex": 0,
                "SubParameters": []
              },
              {
                "Id": 14,
                "Name": "Value",
                "Value": "[result]",
                "ParentParameterId": 11,
                "IsExpression": false,
                "ActionId": 2,
                "OrderIndex": 0,
                "SubParameters": []
              }
            ]
          },
          {
            "Id": 15,
            "Name": "Code",
            "Value": "var data = JSON.parse(input)\nvar parseData = {}\nparseData.name =  data.name\nparseData.description = data.description\nparseData.ticketUrl = data.url\nparseData.mainImage = data.images.filter(obj => {return obj.width > 2000})[0].url\nparseData.localDate = new Date(data.dates.start.localDate).toLocaleDateString() ?? 'TBD'\nparseData.localTime = data.dates.start.localTime ?? 'TBD'\nparseData.segment = data.classifications.map(function(o){return o.segment.name + ' (' + o.genre.name + ', ' + o.subGenre.name +')'}).join()\nparseData.seatmap = data.seatmap !== undefined ? data.seatmap.staticUrl : 'http://1x1px.me/FF4D00-0.png'\nparseData.attractions = JSON.stringify(data._embedded.attractions)\nparseData.promoter = data.promoter !== undefined ?  data.promoter.name + ' (' + data.promoter.description + ')' : ''\nparseData.venues = data._embedded.venues.map(function(o){return o.name + ', ' + o.address.line1 + (o.address.line2 !== undefined ? ', ' + o.address.line2 : '') + (o.address.postalCode !== undefined ? ', ' + o.address.postalCode : '')}).join(' | ')\nparseData.lat = data._embedded.venues[0].location.latitude\nparseData.lon = data._embedded.venues[0].location.longitude\nparseData.detailsHtml = data._embedded.venues.map(function(o){\n\treturn o.name + ' Information:<br>' + (o.boxOfficeInfo !== undefined ? + o.boxOfficeInfo.openHoursDetail + o.boxOfficeInfo.acceptedPaymentDetail + o.boxOfficeInfo.willCallDetail : '')  + o.parkingDetail + o.accessibleSeatingDetail + (o.generalInfo !== undefined ? o.generalInfo.generalRule ?? '' + o.generalInfo.childRule ?? '' : '')\n}).join('</br>')\nreturn parseData[prop]",
            "IsExpression": false,
            "ActionId": 2,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 16,
            "Name": "OutputTokenName",
            "Value": "PropData",
            "IsExpression": false,
            "ActionId": 2,
            "OrderIndex": 0,
            "SubParameters": []
          },
          {
            "Id": 17,
            "Name": "OnError",
            "Value": {
              "Id": 2,
              "EventName": "error",
              "Actions": []
            },
            "IsExpression": false,
            "ActionId": 2,
            "OrderIndex": 0,
            "SubParameters": []
          }
        ],
        "DiagramUID": "Activity_1l8t30o"
      }
    ]
  },
  "CreatedBy": "SuperUser Account",
  "CreatedOn": "2021-02-19T09:48:17.0478195+00:00",
  "LastModifiedBy": "SuperUser Account",
  "LastModifiedOn": "2021-02-19T16:45:35.8329712+00:00",
  "InputFields": [
    {
      "Id": 1,
      "Name": "Id",
      "InputType": "Text",
      "WorkflowId": 1,
      "IsDeleted": false
    },
    {
      "Id": 2,
      "Name": "prop",
      "InputType": "Text",
      "WorkflowId": 1,
      "IsDeleted": false
    }
  ],
  "OutputFields": [
    {
      "Value": "[PropData]",
      "Id": 3,
      "Name": "PropData",
      "InputType": "Text",
      "WorkflowId": 1,
      "IsDeleted": false
    }
  ]
}